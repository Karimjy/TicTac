"use strict";var app=angular.module("tictac",["ngRoute","ngDialog"]);app.config(function(a){a.when("/",{templateUrl:"partials/main.html"}).when("/game",{templateUrl:"partials/game.html"}).when("/options",{templateUrl:"partials/options.html"}).when("/credits",{templateUrl:"partials/credits.html"}).otherwise({redirectTo:"/"})}),app.controller("ClockCtrl",function(a,b,c,d){a.defaultClock,a.hour=0,a.minute=0,a.getHour,a.getMinute,a.hourday="";var e=new Kinetic.Stage({container:"clock",width:440,height:456}),f=new Kinetic.Layer;a.game=function(){c.close(),a.random(),a.Defaultclock(),g.src="../src/img/"+a.defaultClock+".png",h.src="../src/img/firstHand.png",i.src="../src/img/secondHand.png"},a.Defaultclock=function(){a.defaultClock="undefined"==typeof d.getClock()?"clock1":d.getClock()},a.random=function(){a.getHour=Math.floor(12*Math.random())+1,a.getMinute=Math.floor(12*Math.random())+1,a.hourday=a.getHour<12?"Matin":"AprÃ¨s-Midi"};var g=new Image;g.onload=function(){var a=new Kinetic.Image({x:0,y:0,image:g,width:440,height:445});f.add(a),e.add(f)};var h=new Image;h.onload=function(){var b=new Kinetic.Image({image:h,x:220,y:215,width:6,height:120,offsetX:3});b.rotate(180+30*a.getMinute).currentRotation=0,f.add(b),e.add(f)};var i=new Image;i.onload=function(){var b=new Kinetic.Image({image:i,x:220,y:210,width:6,height:80,offsetX:3});b.rotate(180+30*a.getHour).currentRotation=0,f.add(b),e.add(f)},a.up=function(b){"hour"===b?a.hour+=1:a.minute+=5},a.down=function(b){"hour"===b?a.hour-=1:a.minute-=5},a.goTo=function(a){c.close(),b.url(a)},a.check=function(b,d){c.open(b===a.getHour&&d===5*a.getMinute?{template:"partials/success.html",className:"ngdialog-theme-plain",showClose:!0}:{template:"partials/fail.html",showClose:!0,className:"ngdialog-theme-plain"})},a.game()}),app.controller("OptionsCtrl",function(a,b){a.clock=function(a){b.clock(a),console.log(a)}}),app.service("ClockService",function(){var a;this.clock=function(b){a=b},this.getClock=function(){return a}});